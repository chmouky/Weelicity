<!doctype html>
<html lang="fr-FR">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Weelicityx</title>

    <link rel="manifest" href="assets/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Weelicity">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">

    <!-- Lien vers la feuille de style principale -->
    <link rel="stylesheet" href="assets/css/index.css">
    <!-- Exemple d'inclusion de polices -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,400;0,700;1,400;1,700&family=Shrikhand:ital,wght@0,400">
  </head>
  <body>
    <!-- Overlay de chargement dÃ¨s le chargement -->
    <div id="loadingOverlay" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(255, 255, 255, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        ">
        <img id="loadingGif" src="assets/img/index/pin_wait.gif" alt="Chargement..." style="width: 120px; height: auto;">
    </div>

    <div id="siteWrapper">
      <header>
        <!-- En-tÃªte / Navigation simplifiÃ©e -->
        <h1>Weelicity</h1>
      </header>

      <main id="page" class="container">
        <!-- Contenu principal -->
        <section>
          <div class="content">
            <!-- Exemple d'une section avec image -->
            <img src="assets/img/pages/Home.jpg" alt="Accueil de Weelicity">
            <!-- Tu pourras ajouter ici tes blocs de contenu spÃ©cifiques -->
          </div>
        </section>
      </main>

      <footer>
        <!-- Pied de page simplifiÃ© -->
        <p>Â© 2025 Weelicity</p>
      </footer>
    </div>

    <!-- Barre de navigation globale -->
    <div id="custom-footer-navigation">
      <div class="custom-nav-item">
        <button class="custom-nav-button" onclick="window.location.href='/index.html'" data-page="home">
          <img src="assets/img/index/home.png" alt="Home">
        </button>
        <p class="nav-label">Home</p>
      </div>
      <div class="custom-nav-item">
        <button class="custom-nav-button" onclick="window.location.href='/modespots'" data-page="modespots tags1 tags spots tours district">
          <img src="assets/img/index/SpotMap.png" alt="Your Tour">
        </button>
        <p class="nav-label">Visit</p>
      </div>
      <div class="custom-nav-item">
        <button class="custom-nav-button eat-bigger" onclick="window.location.href='/break'" data-page="modeeat break">
          <img src="assets/img/index/AroundMe.png" alt="Eat">
        </button>
        <p class="nav-label">Around Me</p>
      </div>
      <div class="custom-nav-item">
        <button class="custom-nav-button" onclick="window.location.href='/boutonsgeo'" data-page="boutonsgeo">
          <img src="assets/img/index/ai.png" alt="AI">
        </button>
        <p class="nav-label">AI tool</p>
      </div>
      <div class="custom-nav-item">
        <button class="custom-nav-button" onclick="window.location.href='/control'" data-page="control">
          <img src="assets/img/index/control.png" alt="Control">
        </button>
        <p class="nav-label">Control</p>
      </div>
    </div>

    <!-- Script inline pour lancer le chargement immÃ©diatement -->
    <script>
      const ALL_TABLES_WORKER_URL = 'https://airtable-all-table.samueltoledano94.workers.dev/';
      async function preloadAllTables() {
        try {
          const urlTag = `${ALL_TABLES_WORKER_URL}?table=Tag`;
          const urlLieu = `${ALL_TABLES_WORKER_URL}?table=Lieu`;
          const urlQuartier = `${ALL_TABLES_WORKER_URL}?table=Quartier`;
          const urlTour = `${ALL_TABLES_WORKER_URL}?table=Tour`;
          const urlThemeTour = `${ALL_TABLES_WORKER_URL}?table=ThemeTour`;
          const urlGastro = `${ALL_TABLES_WORKER_URL}?table=Gastro`;
          const urlBrands = `${ALL_TABLES_WORKER_URL}?table=Brands`;
          const urlAround = `${ALL_TABLES_WORKER_URL}?table=Around`;
          const urlStreet = `${ALL_TABLES_WORKER_URL}?table=Street`;
          const urlParametre = `${ALL_TABLES_WORKER_URL}?table=Parametre`;

          const [resTag, resLieu, resQuartier, resTour, resThemeTour, resGastro, resBrands, resAround, resStreet, resParametre] = await Promise.all([
            fetch(urlTag, { method: 'GET', headers: { 'Content-Type': 'application/json' } }),
            fetch(urlLieu, { method: 'GET', headers: { 'Content-Type': 'application/json' } }),
            fetch(urlQuartier, { method: 'GET', headers: { 'Content-Type': 'application/json' } }),
            fetch(urlTour, { method: 'GET', headers: { 'Content-Type': 'application/json' } }),
            fetch(urlThemeTour, { method: 'GET', headers: { 'Content-Type': 'application/json' } }),
            fetch(urlGastro, { method: 'GET', headers: { 'Content-Type': 'application/json' } }),
            fetch(urlBrands, { method: 'GET', headers: { 'Content-Type': 'application/json' } }),
            fetch(urlAround, { method: 'GET', headers: { 'Content-Type': 'application/json' } }),
            fetch(urlStreet, { method: 'GET', headers: { 'Content-Type': 'application/json' } }),
            fetch(urlParametre, { method: 'GET', headers: { 'Content-Type': 'application/json' } })
          ]);

          if (!resTag.ok || !resLieu.ok || !resQuartier.ok || !resTour.ok || !resThemeTour.ok || !resGastro.ok || !resBrands.ok || !resAround.ok || !resStreet.ok || !resParametre.ok) {
            throw new Error("Erreur lors de la rÃ©cupÃ©ration des donnÃ©es.");
          }

          const [dataTag, dataLieu, dataQuartier, dataTour, dataThemeTour, dataGastro, dataBrands, dataAround, dataStreet, dataParametre] = await Promise.all([
            resTag.json(),
            resLieu.json(),
            resQuartier.json(),
            resTour.json(),
            resThemeTour.json(),
            resGastro.json(),
            resBrands.json(),
            resAround.json(),
            resStreet.json(),
            resParametre.json()
          ]);

          sessionStorage.setItem('tags', JSON.stringify(dataTag.records));
          sessionStorage.setItem('places', JSON.stringify(dataLieu.records));
          sessionStorage.setItem('quartiers', JSON.stringify(dataQuartier.records));
          sessionStorage.setItem('tour', JSON.stringify(dataTour.records));
          sessionStorage.setItem('themetour', JSON.stringify(dataThemeTour.records));
          sessionStorage.setItem('gastro', JSON.stringify(dataGastro.records));
          sessionStorage.setItem('brands', JSON.stringify(dataBrands.records));
          sessionStorage.setItem('around', JSON.stringify(dataAround.records));
          sessionStorage.setItem('street', JSON.stringify(dataStreet.records));
          sessionStorage.setItem('parametre', JSON.stringify(dataParametre.records));
        } catch (error) {
          console.error('ðŸš¨ Erreur lors de la prÃ©charge des donnÃ©es :', error);
          throw error;
        }
      }

      async function preloadData() {
        try {
          await preloadAllTables();
          const loadingOverlay = document.getElementById("loadingOverlay");
          if (loadingOverlay) loadingOverlay.remove();
          document.body.style.pointerEvents = "auto";
        } catch (error) {
          console.error('Erreur lors du chargement des donnÃ©es :', error);
          setTimeout(() => {
            const loadingOverlay = document.getElementById("loadingOverlay");
            if (loadingOverlay) loadingOverlay.remove();
            document.body.style.pointerEvents = "auto";
          }, 10000); // Masque aprÃ¨s 10 secondes en cas d'erreur
        }
      }

      preloadData();
    </script>

    <!-- Lien vers le script principal -->
    <script src="assets/js/index.js" defer></script>
  </body>
</html>